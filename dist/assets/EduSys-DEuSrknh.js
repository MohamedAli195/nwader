import{u as F,a as v,r as m,j as e,I as j,B as w,S as g,b as M,c as U,T as H,d as I,e as S,f as b,g as R,P as L,M as k,h as P,C as q}from"./index-De2xroJ3.js";function A({tempCat:r,onCloseUp:n}){const[l,{isLoading:o}]=F(),{register:s,handleSubmit:f,setValue:i,formState:{errors:h}}=v();m.useEffect(()=>{r&&(i("name",r==null?void 0:r.name),i("description",r==null?void 0:r.description))},[i,r]);const x=async a=>{var c,p;const u=new FormData;u.append("name",a.name),u.append("description",a.description);try{await l({id:Number(r==null?void 0:r.id),body:{name:a.name,description:a.description}}).unwrap(),g.fire("Success","تم التعديل بنجاح","success"),n()}catch(d){console.log(d);const y=d;g.fire("Error",(p=(c=y==null?void 0:y.data)==null?void 0:c.errors)!=null&&p.name?y.data.errors.name.join(`
`):"Something went wrong","error")}n()};return e.jsxs("form",{className:"flex justify-center flex-col my-12 gap-2 p-5 w-full",onSubmit:f(x),children:[e.jsxs("div",{children:[e.jsx("label",{children:"اسم نظام التعليم"}),e.jsx(j,{type:"text",...s("name",{required:"حقل الاسم مطلوب"})}),h.name&&e.jsx("p",{className:"text-red-500 text-sm",children:h.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{children:"الوصف"}),e.jsx(j,{className:"h-24",type:"text",...s("description")})," "]}),e.jsx("div",{children:e.jsx(w,{className:"w-full text-3xl",disabled:o,children:o?"انتظر...":"تعديل نظام التعليم"})})]})}function G(){var N;const[r,n]=m.useState(1),[l,o]=m.useState(""),{data:s,error:f,isLoading:i}=M({page:r,search:l}),[h,x]=m.useState(!1),[a,u]=m.useState(),c=()=>x(!1),p=()=>x(!0),d=(s==null?void 0:s.data)??[],y=((N=s==null?void 0:s.meta)==null?void 0:N.total)??0,[E]=U(),T=async t=>{if((await g.fire({title:"هل أنت متأكد؟",text:"لن تتمكن من التراجع عن هذا!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#2563eb",cancelButtonColor:"#dc2626",confirmButtonText:"نعم، احذف",cancelButtonText:"إلغاء",buttonsStyling:!0,reverseButtons:!0})).isConfirmed)try{await E(t).unwrap(),g.fire("تم الحذف!","تم الحذف بنجاح.","success")}catch(D){g.fire("خطأ",`حدث خطأ ما! ${D}`,"error")}},B=m.useRef(null),O=t=>o(t.target.value);return i?e.jsx("p",{children:"جاري تحميل البيانات..."}):f?e.jsx("p",{className:"text-red-500",children:"حدث خطأ أثناء جلب البيانات!"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-900",children:[e.jsx("div",{className:"w-full p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:e.jsx("input",{value:l,onChange:O,ref:B,type:"text",placeholder:"ابحث هنا...",className:"h-11 w-full rounded-lg border border-gray-300 bg-white px-4 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400"})}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs(S,{className:"bg-gray-50 dark:bg-gray-800",children:[e.jsx(b,{isHeader:!0,className:"px-5 py-3 font-semibold text-purple-700 text-start",children:"اسم نظام التعليم"}),e.jsx(b,{isHeader:!0,className:"px-5 py-3 font-semibold text-purple-700 text-start",children:"الوصف"}),e.jsx(b,{isHeader:!0,className:"px-5 py-3 font-semibold text-purple-700 text-center text-sm dark:text-gray-300",children:"الإجراءات"})]})}),e.jsx(R,{className:"divide-y divide-gray-100 dark:divide-gray-700",children:d.map(t=>e.jsxs(S,{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[e.jsx(b,{className:"px-5 py-4 text-start text-gray-900 dark:text-gray-100 font-medium",children:t.name}),e.jsx(b,{className:"px-5 py-4 text-gray-600 dark:text-gray-400 text-start",children:t.description}),e.jsxs(b,{className:"px-5 py-4 text-center space-x-2",children:[e.jsx(w,{className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg mx-1",onClick:()=>{p(),u(t)},children:"تعديل"}),e.jsx(w,{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg mx-1",onClick:()=>T(t==null?void 0:t.id),children:"حذف"})]})]},t.id))})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:e.jsx(L,{page:r,SetPage:n,total:y})})]}),e.jsxs(k,{className:"w-full lg:w-4/12 xl:w-4/12 h-auto relative rounded-2xl bg-white dark:bg-gray-900",isOpen:h,onClose:c,children:[e.jsx("h1",{className:"flex justify-center p-3 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:"تعديل نظام التعليم"}),e.jsx(A,{onCloseUp:c,tempCat:a})]})]})}function Q({onClose:r}){const[n,{data:l,isLoading:o}]=P(),{register:s,handleSubmit:f,formState:{errors:i}}=v(),h=async x=>{var u,c;const a=new FormData;a.append("name",x.name),a.append("description",x.description);try{await n(a).unwrap(),g.fire("تم ","تم بنجاح","success")}catch(p){const d=p;g.fire("Error",(c=(u=d==null?void 0:d.data)==null?void 0:u.errors)!=null&&c.name?d.data.errors.name.join(`
`):"Something went wrong","error")}r()};return e.jsxs("form",{className:"flex justify-center  flex-col my-12 gap-2 p-5 w-full ",onSubmit:f(h),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"اسم نظام التعليم"}),e.jsx(j,{type:"text",...s("name",{required:"حقل الاسم مطلوب"})}),i.name&&e.jsx("p",{className:"text-red-500 text-sm",children:i.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{children:"الوصف "}),e.jsx(j,{className:"h-24",type:"text",...s("description")})]}),e.jsx("div",{children:e.jsx(w,{className:"w-full text-3xl",disabled:o,children:o?"انتظر...":" اضافة نظام"})}),l&&e.jsx("p",{style:{color:"green"},children:" added successfully!"})]})}const z=()=>{const[r,n]=m.useState(!1),l=()=>{n(!1)},o=()=>{n(!0)};return e.jsxs(q,{onOpen:o,title:"educational-systems",children:[e.jsx(G,{}),e.jsxs(k,{className:"w-full  lg:w-4/12 xl:w-4/12  h-auto relative  rounded-3xl bg-white  dark:bg-gray-900",isOpen:r,onClose:l,children:[e.jsx("h1",{className:"flex justify-center p-3  text-3xl",children:"اضافة نظام تعليمى"}),e.jsx(Q,{onClose:l})]})]})};export{z as default};
